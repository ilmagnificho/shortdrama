<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Episode 1: 예고편 두둥</title>

    <!-- YouTube IFrame API 추가 -->
    <script src="https://www.youtube.com/iframe_api"></script>

    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="video-container">
        <!-- 비디오 화면 -->
        <iframe id="video" src="https://www.youtube.com/embed/hfqup-YNCk4" frameborder="0" allowfullscreen></iframe>

        <!-- 플로팅 버튼 -->
        <button class="floating-button" id="episode-btn">List</button>

        <!-- 회차 선택 메뉴 (오버레이) -->
        <div class="episode-overlay" id="episode-menu">
            <div class="episode-content">
                <span class="close-btn" id="close-btn">&times;</span>
                <h3>회차 선택</h3>
                <div class="episode-buttons">
                    <button class="current-episode" onclick="window.location.href='episode1.html'">1</button>
                    <button onclick="window.location.href='episode2.html'">2</button>
                    <button onclick="window.location.href='episode3.html'">3</button>
                    <button onclick="window.location.href='episode4.html'">4</button>
                    <button onclick="window.location.href='episode5.html'">5</button>
                    <button onclick="window.location.href='episode6.html'">6</button>
                    <button onclick="window.location.href='episode7.html'">7</button>
                    <button onclick="window.location.href='episode8.html'">8</button>
                    <button onclick="window.location.href='episode9.html'">9</button>
                    <button onclick="window.location.href='episode10.html'">10</button>
                </div>
            </div>
        </div>
    </div>

    <!-- YouTube API와 에피소드 전환 로직 -->
    <script>
        // 현재 URL에서 에피소드 번호 추출
        var currentUrl = window.location.href;
        var currentEpisode = parseInt(currentUrl.match(/episode(\d+)/)[1] || 1); // episode1.html에선 1로 가정

        function onYouTubeIframeAPIReady() {
            var player = new YT.Player('video', {
                events: {
                    'onStateChange': onPlayerStateChange
                }
            });
        }

        function onPlayerStateChange(event) {
            if (event.data === YT.PlayerState.ENDED) {
                var nextEpisode = currentEpisode + 1;
                if (nextEpisode <= 10) { // 마지막 에피소드 이후로 넘어가지 않도록 설정
                    window.location.href = 'episode' + nextEpisode + '.html';
                } else {
                    alert('모든 에피소드를 시청하셨습니다.');
                }
            }
        }

        // YouTube API 로드
        var tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";
        var firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
    </script>

</body>
</html>
